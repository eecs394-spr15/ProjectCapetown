<html>
    <script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<div ng-controller="IndexController">

  <super-navbar>
    <super-navbar-title>
    </super-navbar-title>
  </super-navbar>

  <div class="padding">
    <h1>Study Info</h1>
  </div>




<script type = "foo/bar" id = "eventTemplate">
    
    <div class="list" ng-controller="studyInfoController">
    
    <a class="item item-thumbnail-left" href="#studyInfo?objectId">
        <h2><%=study%></h2>
        <img src = "<%=posterIcon._url%>" height = "80" width="80" style="top: 40px"</img>
        <p><%="$" + compensation%>, <%=duration%></p>
        <p><%=location%></p>
        <p><%="Start date: " +startdate_str%></p>
        <p><%="End date: " + enddate_str%></p>
    </a>
    
    </div>

  </script>


<script type="text/javascript">
    Parse.initialize("susDpNWLgi3QqeprNxBKeQ7uIJK0srYlde52neVb", "OMWpK5Oa17fiNcDyTkqvbKz2HHL6szH4jPYXlhz0");
    var template = $("#eventTemplate").html();
    us_template = _.template(template);
    var createEvent = function(a) {
        $("#events").append(us_template(a));
    }
    var TestObject = Parse.Object.extend("TestObject");
    var testObject = new TestObject();
    testObject.save({foo: "Frank124"}).then(function(object) {
    });

    var EventObject = Parse.Object.extend("event");
    var query = new Parse.Query(EventObject);

    query.find({
           success: function(results) {
           
           for (var i = 0; i<results.length; i++)  //The length of data should be mutable
           {
           
               var object = results[i].attributes;
               //test ID retrieval
               object.testId = results[i].id;
           
               //testForId = object.testId;
               createEvent(object);
               }
           
           document.getElementById("1").innerHTML = "success";
        },
           error: function(object, error) {
           
               document.getElementById("1").innerHTML = "error";
           }
           });
         </script>

</div>
