
<!--
<input type="checkbox" />Checkbox<br/>
<span id="result"></span>
<script type="text/javascript">
window.onload = function () {
    var input = document.querySelector('input[type=checkbox]');

    function check() {
        var a = input.checked ? "checked" : "not checked";
        document.getElementById('result').innerHTML = 'result ' + a;
    }
    input.onchange = check;
    check();
}
</script>
-->


<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
/*
$(document).ready(function(){
    $("#hide").click(function()
    {
        $(".answer").hide();
    });

    $("#submit").click(function()
    {
        //Check answers
        var is_correct = isCorrect();

        //$(".answer").show();

        if(is_correct)
        {
          //$("#submit").setValue("Next -->");
          alert("CORRECT");
        }
        else
        {
          alert("INCORRECT");
        }
    });
});
*/
</script>
</head>

<div ng-controller="caseController">

<h3> {{question}} </h3>

  <ul class="list"> 
    <div  ng-repeat="a in answers">
      <li class="item item-checkbox">
         <label class="checkbox">
           <input type="checkbox" ng-model="a.val" ng-disabled="!answers_enabled">
         </label>
         {{a.label}}
      </li>
      <div ng-show="showAnswers && a.correct"> {{a.correct_str}} </div>
      <div ng-show="showAnswers && !a.correct"> {{a.incorrect_str}} </div>
    </div>
  </ul>

  <div ng-show="testFunc()"> SELECTED </div>

    <a id= "submit" class="button button-block button-calm icon-left super-document" ng-click="onSubmit()"> {{submitText}} </a>
    <a id= "hide" class="button button-block button-calm icon-left super-document">Hide</a>


<!--
  <ul class = "list">
    <li ng-repeat="a in answers" class="item item-checkbox"> {{a}} </li>

    <a id= "submit" class="button button-block button-calm icon-left super-document" href="#" onclick="alert(\"TEST\");">Submit</a>
    <a id= "hide" class="button button-block button-calm icon-left super-document" href="#">Hide</a>
  </ul>
-->
</div>

<!--
<ul class="list">
  <li class="item item-checkbox">
     <label class="checkbox">
       <input type="checkbox">
     </label>
     A Ph.D. in Mathematical Biology
  </li>
  <p class="answer" id="answer1"> Wrong </p>
  <li class="item item-checkbox">
     <label class="checkbox">
       <input type="checkbox">
     </label>
     A Ph.D. in Theoretical Mathematics
  </li>
  <p class="answer" id="answer2"> Wrong </p>
  <li class="item item-checkbox">
     <label class="checkbox">
       <input type="checkbox">
     </label>
     A Ph.D. in Statistics
  </li>
  <p class="answer" id="answer3"> Wrong </p>
  <li class="item item-checkbox">
     <label class="checkbox">
       <input type="checkbox">
     </label>
     A large pepperoni pizza
  </li>
  <p class="answer" id="answer4"> Wrong </p>



  
</ul>
-->

<script>

angular
  .module('example')
  .controller('caseController', function ($scope, $filter)
  {
    $scope.answers = [{label:"a1", val:false, correct_val:true, correct:false, correct_str:"",                 incorrect_str:"You must ..."},
                      {label:"a2", val:false, correct_val:false, correct:false, correct_str:"You got it!", incorrect_str:"WRONG!!"},
                      {label:"a3", val:false, correct_val:true, correct:false, correct_str:"You got it!", incorrect_str:"WRONG!!"},
                      {label:"a4", val:false, correct_val:false, correct:false, correct_str:"You got it!", incorrect_str:"WRONG!!"}];

    $scope.showAnswers = false;

    $scope.question = "Which of the following is the most different from the others?";

    $scope.submitText = "Submit";
    $scope.nextPage = "#";
    //$scope.selection = ['a1', 'a4'];

    $scope.answers_enabled = true;

    $scope.isCorrect = function()
    {
      var selected = $filter("filter")($scope.answers, {correct:true});

      for(i = 0; i < $scope.answers.length; i++)
      {
        if(selected.indexOf($scope.answers[i]) < 0)
          return false;
      }

      return true;
    };

    $scope.onSubmit = function()
    {
        for(i = 0; i < $scope.answers.length; i++)
        {
          $scope.answers[i].correct = $scope.answers[i].val == $scope.answers[i].correct_val;
        }

        //Check answers
        var is_correct = $scope.isCorrect();

        //$(".answer").show();


        if(is_correct)
        {
          $scope.submitText = "Next -->";
          $scope.answers_enabled = false;

         // $scope.nextPage = 
          alert("CORRECT");
        }
        else
        {
          alert("INCORRECT");
        }

        $scope.showAnswers = true;
        $scope.nextPage = "#";
    }



/*
    $scope.toggleSelecton = function toggleSelection(answer)
    {
      var index = $scope.selection.indexOf(answer);


      if(index > -1)
        $scope.selection.splice(index, 1);
      else
        $scope.selection.push(answer);

    };
*/
  });
</script>


</html>
